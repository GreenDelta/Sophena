<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Sophena - Dokumentation</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- syntax highlighting -->
	<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/default.min.css">
	<script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
	<script>hljs.initHighlightingOnLoad()</script>

	<!-- display of mathematical formulas -->
	<script type="text/x-mathjax-config">
	MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
	</script>
	<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

	<style>
		html {
			font-family: Verdana, Geneva, Tahoma, sans-serif;
		}

		pre, code {
    		font-family: Courier New, Courier, monospace;
			font-weight: bold;
		}

		body {
			padding: 25px
		}

		a {
			text-decoration: none;
		}

	</style>
</head>
<body>

	<h2>Funktionen der energetischen Berechnung</h2>
	
	<h3><a name="BrennstoffenergieHolz">Brennstoffenergie von Holz</a></h3>
	Bei der Berechnung der Brennstoffeinergie von Holz geht der Wassergehalt des Holzes mit ein:

		$$ Q = wm *[(1 - wc)*cv - wc * vap] $$

	Dabei ist $wm$ [kg] die <a href="#Holzmasse">Holzmasse</a>, $wc$ der Wassergehalt, $cv$ [kWh/kg atro]
	<a href="#Heizwert">Heizwert</a> für absolut trockenes Holz und $vap$ die Verdampfungsenergie von
	Wasser = 0,68 kWh / kg.

	<pre><code class="java">
		double q = WoodFuelEnergy
				.ofWoodMass_kg(10)
				.waterContent(0.2)
				.calorificValue_kWh_per_kg(5)
				.get_kWh();
	</code></pre>


	<h3><a name="Holzmasse">Holzmasse</a></h3>
	Holzmengen können für Scheitholz in Ster und für Holzhackschnitzel in Schüttraummeter angegeben werden. Die
	Holzmasse $wm$ [kg] kann für eine Holzmenge $wa$ [m3] wie folgt berechnet werden:

		$$ wm = \frac{wa * f * \rho_w}{1 - wc} $$

	Dabei ist $f$ der Umrechnungsfaktor von Ster (f = 0.7) bzw. Schüttraummeter (f = 0.4) zu Festmeter. $\rho_w$ ist
	die Dichte des Holzes [kg/Festmeter] und $wc$ des Wassergehalt des Holzes.

	<pre><code class="java">
		double wm = WoodMass
				.ofWoodChips_m3(5)
				.woodDensity_kg_per_m3(379)
				.waterContent(0.2)
				.get_kg();
	</code></pre>

	Daneben kann die Holzmasse auch aus der <a href="#BrennstoffenergieHolz">Brennstoffenergie des Holzes</a>
	zurückgerechnet werden:

		$$ wm = \frac{Q}{[(1 - wc)*cv - wc * vap]} $$

	<pre><code class="java">
		double wm = WoodMass
				.ofEnergy_kWh(1200)
				.waterContent(0.2)
				.calorificValue_kWh_per_kg(5)
				.get_kg();
	</code></pre>


	<h3><a name="Holzmenge">Holzmenge</a></h3>
	Aus der <a href="#Holzmasse">Holzmasse</a> kann die Menge an Scheitholz oder Holzhackschnitzel zurückgerechnet
	werden:

		$$ wa = \frac{wm * (1 - wc)}{f * \rho_w} $$

	<pre><code class="java">
		double wa = WoodAmount
				.ofMass_kg(50)
				.waterContent(0.2)
				.woodDensity_kg_per_m3(379)
				.getAmountInLogs_stere();
	</code></pre>


	<h3><a name="Nutzungsgrad">Nutzungsgrad</a></h3>
	Der Nutzungsgrad $ur$ ist allgemein das Verhältnis aus nutzbar gemachter Energie zu zugeführter Energie
	und wird aus dem Wirkungsgrad $er$ und dem Bereitschaftswirkungsgrad $sr$ berechnet:

		$$ ur = er * sr $$

	Der Wirkungsgrad des Kessels ist eine Herstellerangabe. Der Bereitschaftswirkungsgrad $sr$ wird
	wie folgt berechnet:

		$$ sr = \frac{1}{(\frac{t_u}{t_{full}}-1)*sl + 1} $$

	Dabei sind $t_u$ [h] die Nutzungsdauer (gewöhnlich 8760 Stunden) des Kessels, $t_{full}$ [h] die
	<a href="#Volllaststunden">Volllaststunden</a> und $sl$ der spezifische Bereitschaftsverlust.
	Für kleine Kessel (= Kessel der bisherigen Verbräuche) wird für $sl$ ein Wert von 0.014 und
	für große Kessel (= Kessel des Wärmenetzes) ein Wert von 0.0055 angesetzt.

	<p>Basis API:</p>
	<pre><code class="java">
		double ur = UtilisationRate
				.ofSmallBoiler()
				.efficiencyRate(0.9)
				.usageDuration_h(8760)
				.fullLoadHours_h(2000)
				.get();
	</code></pre>

	<p>Convenience API:</p>
	<pre><code class="java">

	</code></pre>


	<h3><a name="Wirkungsgrad">Wirkungsgrad</a></h3>
	Der Wirkungsgrad $er$ ist eine Herstellerangabe. Bei manchen Nutzerangaben muss er aber aus dem
	<a href="#Nutzungsgrad">Nutzungsgrad</a> $ur$ berechnet werden:

		$$ er = \frac{ur}{sr}$$

		$$ er = ur * [(\frac{t_u}{t_{full}}-1)*sl + 1] $$

	<pre><code class="java">
		double er = EfficiencyRate
				.ofSmallBoiler()
				.utilisationRate(0.85)
				.usageDuration_h(8760)
				.fullLoadHours_h(2000)
				.get();
	</code></pre>


    <h3><a name="Jahresdauerlinie">Jahresdauerlinie einzelner Abnehmer</a></h3>
    In die Berechnung der Jahresdauerlinie oder Lastkurve für einzelne Abnehmer geht zunächst
    die benötigte Wärme $Q_{total}$ [kWh] des Abnehmers für das gesamte Jahr ein. Bei
    Abnehmern mit Brennstoffangaben (verbrauchsgebundene Berechnung) ergibt
    sich dieser Wert aus den Brennstoffmengen. Bei Abnehmern mit Angabe der
    Heizlast $P_{max}$ [kW] (bedarfsgebundene Berechnung) wird der Wert mit Hilfe der
    <a href="#Volllaststunden">Volllaststunden</a> $t_{full}$ [h] (Gebäudedefaults oder
    Nutzereingabe) berechnet:

        $$ Q_{total} = P_{max} * t_{full} $$

    Mit dem Warmwasseranteil $wf$ des Abnehmers lässt sich daraus die benötigte
    Wärmemenge für Warmwasser $Q_{water}$ [kWh] berechnen:

        $$ Q_{water} = wf * Q_{total} $$

    Daraus lässt sich die minimale Leistung $P_{min}$ [kW], die unabhängig von
    der Temperatur für die 8760 Stunden im Jahr erbracht werden muss, wie folgt
    berechnen:

        $$ P_{min} = \frac{Q_{water}}{8760} $$

    Dies ist der statische Anteil der Lastkurve, der zu jeder Stunde gleich ist.
    Der dynamische Anteil wird anhand der Temperaturkurve ermittelt. Dazu werden
    zunächst die Heizgrade $hd_i$ [°C] für jede Stunde $i$ mit Hilfe der Heizgrenztemperatur
    $T_{lim}$ [°C] und der jeweiligen Temperatur $T_i$ [°C] der Temperaturkurve
    berechnet. Die gebäudespezifische Heizgrenztemperatur ist dabei die Temperatur,
    ab der nicht mehr geheizt wird:

        $$ hd_i = \left\{\begin{matrix}
              & 0 & \text{if} & T_i >= T_{lim} \\
              & T_{lim} - T_i & \text{else} \\
             \end{matrix}\right.
        $$

    Damit lässt sich dann ein Wärmebedarf pro Heizgrad $Qd$ [kWh/°C] für den
    dynamischen Anteil der Lastkurve berechnen:

        $$ Qd = \frac{Q_{total} - Q_{water}}{\sum{hd_i}}$$

    Der dynamische Anteil $P_{dyn,i}$ [kW] der Lastkurve zur Stunde $i$ berechnet
    sich dann zu:

        $$ P_{dyn,i} = hd_i * Qd $$

    Und damit ist die benötigte Leistung zur Stunde $i$ für den Abnehmer:

        $$ P_i = P_{min} + P_{dyn,i} $$


	<h3>Kapazität des Pufferspeichers</h3>
	In der Simulationsrechnung wird die Kapazität des Pufferspeichers $Q_{cap,buff}$ [kWh] wie folgt
	berechnet:

		$$ Q_{cap,buff} = c * m * \Delta T $$

	Dabei ist $c$ die spezifische Wärmekapazität von Wasser (1,166 Wh/kg K), $m$ die Masse des Wassers
	und $\Delta T$ der Temperaturunterschied zwischen der maximalen Pufferladetemperatur und der
	Rücklauftemperatur.

	<p>Basis API:</p>
	<pre><code class="java">
		double q = BufferCapacity
				.ofVolume_L(10000)
				.maxChargingTemperatur_degC(80)
				.returnTemperature_degC(60)
				.get_kWh();
	</code></pre>

	<p>Convenience API:</p>
	<pre><code class="java">
		double q = BufferCapacity.get(project.heatNet);
	</code></pre>


    <h3>Glättung von Lastprofilen</h3>
    Die Angaben eines Gleichzeitigkeitsfaktors $sf < 1$ führt dazu, dass sich das
    Lastprofil des Projekts glättet. Das bedeutet, dass sich Lastspitzen verteilen.
    Die Glättung wird auf den temperaturabhängigen (dynamischen) Teil der
    Jahresdauerlinie angewendet und über gleitende Mittelwerte berechnet. Die
    Anzahl von benachbarten Stunden $k$, die dabei gemittelt werden, ergibt sich mit
    def folgenden Formel:

        $$ k = round((1 - sf) * rf) $$

    Dabei ist $rf$ der Glättungsfactor, der einen überschreibbaren Defaultwert hat.


	<h3>Benötigten Brennstoffmenge</h3>
	Das Ergebnis der Simulationsrechnung ist die Wärmemenge $Q_{gen}$ [kWh], die von einem Kessel erzeugt
	werden muss. Teilt man diese durch den <a href="#Nutzungsgrad">Nutzungsgrad</a> $ur$ des Kessels, erhält
	man die Brennstoffenergie $E$ [kWh], die dafür zugeführt werden muss:

		$$ E = \frac{Q_{gen}}{ur} $$

	Über den <a href="#Heizwert">Heizwert</a> $cv$
	erhält man dann die benötigte Brennstoffmenge $m$:

		$$ m = \frac{Q_{gen}}{ur*cv} $$

	Die Brennstoffmenge wird in der Referenzeinheit des Heizwerts errechnet. Für Holzbrennstoffe ist das kg atro.


	
	<h2></h2>

	<h3><a name="Barwertfaktor">Barwertfaktor</a></h3>
	Der Barwertfaktor $cvf$ wird wie folgt berechnet:

	$$ cvf = \left\{\begin{matrix}
              & \frac{n}{i+1} & \text{if} & i+1 = pcf \\
              & \
             \end{matrix}\right.
    $$

</body>
</html>
